<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>KIPO clicker</title>
    <link rel="stylesheet" href="styles.css" /> <!-sjfjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjjj-->
     <style> 
        :root {
            --bg-dark: #1A1A1A;
            --bg-panel: #262626;
            --accent-orange: #FF6B00;
            --accent-light: #FF8C42;
            --text-light: #FFFFFF;
            --text-gray: #CCCCCC;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-dark);
            color: var(--text-light);
            margin: 0;
            padding: 0;
        }
        
        .wallet-tab-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 12px 24px;
            background-color: var(--accent-orange);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            z-index: 1000;
            font-weight: 600;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }
        
        .wallet-tab-btn:hover {
            background-color: var(--accent-light);
            transform: translateY(-2px);
        }
        
        .wallet-panel {
            position: fixed;
            top: 0;
            right: 0;
            width: 350px;
            height: 100vh;
            background-color: var(--bg-panel);
            z-index: 999;
            padding: 30px;
            box-shadow: -5px 0 25px rgba(0, 0, 0, 0.5);
            transform: translateX(100%);
            transition: transform 0.3s ease-out;
            display: flex;
            flex-direction: column;
        }
        
        .wallet-panel.active {
            transform: translateX(0);
        }
        
        .wallet-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }
        
        .wallet-logo {
            width: 100px;
            height: 100px;
            object-fit: contain;
            margin: 20px auto;
        }
        
        .wallet-status {
            background-color: rgba(255, 107, 0, 0.1);
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            word-break: break-all;
        }
        
        .wallet-address {
            color: var(--accent-orange);
            font-weight: 600;
            margin-top: 10px;
        }
        
        .wallet-input {
            width: 100%;
            padding: 12px;
            border-radius: 8px;
            border: 1px solid #444;
            background-color: #333;
            color: white;
            margin: 10px 0;
            font-size: 14px;
        }
        
        .wallet-btn {
            width: 100%;
            padding: 14px;
            border-radius: 8px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-top: 10px;
        }
        
        .connect-btn {
            background-color: var(--accent-orange);
            color: white;
        }
        
        .connect-btn:hover {
            background-color: var(--accent-light);
        }
        
        .disconnect-btn {
            background-color: transparent;
            color: var(--accent-orange);
            border: 2px solid var(--accent-orange);
        }
        
        .disconnect-btn:hover {
            background-color: rgba(255, 107, 0, 0.1);
        }
        
        .manual-connect-btn {
            background-color: #333;
            color: var(--accent-orange);
            border: 2px solid var(--accent-orange);
        }
        
        .manual-connect-btn:hover {
            background-color: #3a3a3a;
        }
        
        .close-btn {
            background: none;
            border: none;
            color: var(--text-gray);
            font-size: 24px;
            cursor: pointer;
        }
        
        .hidden {
            display: none;
        }
        
        .tab-buttons {
            display: flex;
            margin-bottom: 20px;
        }
        
        .tab-btn {
            flex: 1;
            padding: 10px;
            background: #333;
            border: none;
            color: white;
            cursor: pointer;
        }
        
        .tab-btn.active {
            background: var(--accent-orange);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
    </style> <!--fdsffkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkk-->
  </head>
  <body> 
    <div class="game">
      <div class="header">
        <img src="./assets/cooin.png" alt="coin" />
        <h2 class="score" id="score">42</h2>
      </div>
      <div class="circle">
        <img id="circle" src="./assets/CryptoE.png" alt="frog" />
      </div>
    </div>
    <script src="app.js" defer></script> <!--ddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd-->
    <button id="walletTabBtn" class="wallet-tab-btn">
        <span id="walletBtnText">Подключить кошелек</span>
    </button>
    
    <div id="walletPanel" class="wallet-panel">
        <div class="wallet-header">
            <h2>Криптокошелек</h2>
            <button id="closeWalletPanel" class="close-btn">&times;</button>
        </div>
        
        <img src="https://cryptologos.cc/logos/ethereum-eth-logo.png" alt="Ethereum" class="wallet-logo">
        
        <div class="tab-buttons">
            <button class="tab-btn active" data-tab="auto">Автоподключение</button>
            <button class="tab-btn" data-tab="manual">Вручную</button>
        </div>
        
        <div id="autoTab" class="tab-content active">
            <div id="walletStatus" class="wallet-status">
                <p id="walletStatusText">Кошелек не подключен</p>
                <p id="walletAddress" class="wallet-address hidden"></p>
            </div>
            
            <button id="connectWalletBtn" class="wallet-btn connect-btn">Подключить автоматически</button>
            <button id="disconnectWalletBtn" class="wallet-btn disconnect-btn hidden">Отключить</button>
        </div>
        
        <div id="manualTab" class="tab-content">
            <input type="text" id="manualWalletInput" class="wallet-input" placeholder="Введите адрес кошелька (0x...)">
            <button id="pasteAddressBtn" class="wallet-btn manual-connect-btn">Вставить адрес</button>
            <button id="saveManualWalletBtn" class="wallet-btn connect-btn">Сохранить кошелек</button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Элементы интерфейса
            const walletTabBtn = document.getElementById('walletTabBtn');
            const walletPanel = document.getElementById('walletPanel');
            const closeWalletPanel = document.getElementById('closeWalletPanel');
            const connectWalletBtn = document.getElementById('connectWalletBtn');
            const disconnectWalletBtn = document.getElementById('disconnectWalletBtn');
            const walletStatusText = document.getElementById('walletStatusText');
            const walletAddress = document.getElementById('walletAddress');
            const walletBtnText = document.getElementById('walletBtnText');
            const manualWalletInput = document.getElementById('manualWalletInput');
            const pasteAddressBtn = document.getElementById('pasteAddressBtn');
            const saveManualWalletBtn = document.getElementById('saveManualWalletBtn');
            const tabButtons = document.querySelectorAll('.tab-btn');
            const tabContents = document.querySelectorAll('.tab-content');
            
            // Проверка сохраненного кошелька
            const savedWallet = localStorage.getItem('ethereumWallet');
            if (savedWallet) {
                updateUI(JSON.parse(savedWallet));
            }
            
            // Открытие/закрытие панели
            walletTabBtn.addEventListener('click', function() {
                walletPanel.classList.toggle('active');
            });
            
            closeWalletPanel.addEventListener('click', function() {
                walletPanel.classList.remove('active');
            });
            
            // Переключение вкладок
            tabButtons.forEach(btn => {
                btn.addEventListener('click', function() {
                    const tabId = this.getAttribute('data-tab');
                    
                    tabButtons.forEach(b => b.classList.remove('active'));
                    tabContents.forEach(c => c.classList.remove('active'));
                    
                    this.classList.add('active');
                    document.getElementById(tabId + 'Tab').classList.add('active');
                });
            });
            
            // Автоподключение кошелька
            connectWalletBtn.addEventListener('click', async function() {
                if (window.ethereum) {
                    try {
                        const accounts = await window.ethereum.request({ 
                            method: 'eth_requestAccounts' 
                        });
                        
                        const walletData = {
                            address: accounts[0],
                            connectedAt: new Date().toISOString(),
                            type: 'auto'
                        };
                        
                        localStorage.setItem('ethereumWallet', JSON.stringify(walletData));
                        updateUI(walletData);
                        walletStatusText.textContent = 'Успешное подключение!';
                    } catch (error) {
                        console.error('Ошибка подключения:', error);
                        walletStatusText.textContent = 'Подключение отменено';
                    }
                } else {
                    walletStatusText.textContent = 'Не найден Ethereum-кошелек';
                }
            });
            
            // Вставка адреса из буфера
            pasteAddressBtn.addEventListener('click', async function() {
                try {
                    const text = await navigator.clipboard.readText();
                    manualWalletInput.value = text;
                } catch (err) {
                    alert('Не удалось вставить адрес. Разрешите доступ к буферу обмена.');
                }
            });
            
            // Сохранение адреса вручную
            saveManualWalletBtn.addEventListener('click', function() {
                const address = manualWalletInput.value.trim();
                
                if (!address) {
                    alert('Введите адрес кошелька!');
                    return;
                }
                
                // Простая валидация Ethereum-адреса
                if (!/^0x[a-fA-F0-9]{40}$/.test(address)) {
                    alert('Неверный формат адреса кошелька!');
                    return;
                }
                
                const walletData = {
                    address: address,
                    connectedAt: new Date().toISOString(),
                    type: 'manual'
                };
                
                localStorage.setItem('ethereumWallet', JSON.stringify(walletData));
                updateUI(walletData);
                manualWalletInput.value = '';
                alert('Кошелек успешно сохранен!');
            });
            
            // Отключение кошелька
            disconnectWalletBtn.addEventListener('click', function() {
                localStorage.removeItem('ethereumWallet');
                resetUI();
                walletStatusText.textContent = 'Кошелек отключен';
            });
            
            // Обновление интерфейса
            function updateUI(walletData) {
                const shortAddress = `${walletData.address.substring(0, 6)}...${walletData.address.substring(walletData.address.length - 4)}`;
                
                walletStatusText.textContent = 'Подключен кошелек:';
                walletAddress.textContent = shortAddress;
                walletAddress.classList.remove('hidden');
                connectWalletBtn.classList.add('hidden');
                disconnectWalletBtn.classList.remove('hidden');
                
                walletBtnText.textContent = shortAddress;
                walletTabBtn.style.backgroundColor = 'rgba(255, 107, 0, 0.2)';
                walletTabBtn.style.color = 'var(--accent-orange)';
            }
            
            // Сброс интерфейса
            function resetUI() {
                walletStatusText.textContent = 'Кошелек не подключен';
                walletAddress.textContent = '';
                walletAddress.classList.add('hidden');
                connectWalletBtn.classList.remove('hidden');
                disconnectWalletBtn.classList.add('hidden');
                
                walletBtnText.textContent = 'Подключить кошелек';
                walletTabBtn.style.backgroundColor = 'var(--accent-orange)';
                walletTabBtn.style.color = 'white';
            }
            
            // Отслеживание смены аккаунта
            if (window.ethereum) {
                window.ethereum.on('accountsChanged', (accounts) => {
                    if (accounts.length === 0) {
                        localStorage.removeItem('ethereumWallet');
                        resetUI();
                        walletStatusText.textContent = 'Кошелек отключен';
                    } else {
                        const walletData = {
                            address: accounts[0],
                            connectedAt: new Date().toISOString()
                        };
                        localStorage.setItem('ethereumWallet', JSON.stringify(walletData));
                        updateUI(walletData);
                        walletStatusText.textContent = 'Аккаунт изменен';
                    }
                });
            }
        });
    </script> <!--dffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff-->
  </body>
</html>
